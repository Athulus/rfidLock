#!/usr/bin/python3

from rfidLock import MemberDatabase
import json
import mysql.connector
from sys import argv

def main():
  db = None
  try:
    with open(argv[1]) as db_config:
      db = mysql.connector.connect(**json.load(db_config))
    member_db = MemberDatabase(db, "%s")
    member_db.create()
    db.commit()
    db.close()
  except FileNotFoundError:
    print("JSON config file must exist to install the database")
  except IndexError:
    print("The JSON config file must be provided as the first command line argument")

if __name__ == '__main__':
  main()

